<?php


namespace RIB\command;

use Telegram;

class Help
{
    private Telegram $telegram;
    private int $chat_id;

    public function __construct($telegram)
    {
        $this->telegram = $telegram;
        $this->chat_id = $this->telegram->ChatID();
    }

    private function getVersion(): string
    {
        $filename = __FILE__; // ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¸Ð¼Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ñ„Ð°Ð¹Ð»Ð° (Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°)
        $creation_time = filectime($filename); // ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð²Ñ€ÐµÐ¼Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð°

        if ($creation_time !== false) {
            return date('Y-m-d H:i:s', $creation_time);
        } else {
            return "ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð²ÐµÑ€ÑÐ¸ÑŽ.";
        }
    }

    public function index()
    {
        $this->telegram->sendMessage(
          [
            'chat_id' => $this->chat_id,
            'text' => 'ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð¼Ð½Ðµ Ð»Ð¸Ñ‡Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ @lyucean'
              .PHP_EOL.'Ð¯ Ð²Ð°Ð¼ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð¿Ð¾Ð¼Ð¾Ð³Ñƒ ðŸ–'
              .PHP_EOL
              .PHP_EOL.'Ð’Ð°ÑˆÐ° Ð²ÐµÑ€ÑÐ¸Ñ: '.$this->getVersion()
          ]
        );
    }
}
